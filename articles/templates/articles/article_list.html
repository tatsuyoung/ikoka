{% extends 'base_layout.html' %}

{% block content %}

<div class="title" id="clouds">
    <div class="cloud top"></div>
    <div class="cloud mid_1"></div>
    <div class="cloud mid_2"></div>
    <div class="cloud mid_3"></div>
    <div class="cloud bottom"></div>

    <div class="balloon-back">
        <div class="balloon">
            <p>nice</p>
        </div>
    </div>

    <h1 id="list_title"><span class="a">Oita Loc</span><span class="b">al things</span></h1>
      <div class="sub_title">
         住んでいる人にとって「何気ないもの」...<br>
          「何気ないもの」は誰かにとっては「何気なくないもの」かもしれない。<br>
            何気なくないものに恋して、<br>
            何気ないものに逢いにゆく。
      </div>
</div>

    <div class="articles">
        {% for article in articles %}
        <div class="article">

            <p class="author"><a href="{% url 'articles:user-posts' article.author.username %}" style="color:#0f121f">
            {{ article.author.username }}
            </a>
            </p>
            <p><small>{{ article.date | date:"y/n/j"}}</small></p>

            <h3><a href="{% url 'articles:detail' detail_id=article.id %}">
            {% block title %}{{ article.title }}{% endblock %}
            </a>
            </h3>
            <p>{% block description %}{{ article.snippet }}{% endblock %}<small>Read more</small></p>
            <div class="in-pict">
                <a href="{% url 'articles:detail' detail_id=article.id %}">
                    <img src="{{ article.thumb.url }}" loading="lazy"/>
                </a>
            </div>
            <div class="article_list_user_img">
                <a href="{% url 'articles:author-view' article.author.username %}">
                <img src="{{ article.author.profile.image.url }}" alt="Avatar" class="img-cover" loading="lazy"/>
                </a>
            </div>

            <hr class="hr_list_border">
            <div class="icons">
                <div class="list_article_icon">
                    <p class="add_comments">
                        <i class="far fa-comment-alt"></i>
                        {{ article.comments.count }}
                    </p>
                </div>
                 <div class="list_article_icon">
                     <p class="like_hearts">
                        <i class="fa fa-heart"></i>
                        {{ article.total_likes }}
                    </p>
                 </div>
                <div class="list_article_icon">
                    <a href="https://www.facebook.com/sharer/sharer.php?u={{ request.scheme }}://{{ request.get_host }}{% url 'articles:detail'  detail_id=article.id %}"
                            target="_blank" rel="nofollow" class="fb">
                            <i class="fab fa-facebook"></i>
                    </a>
                </div>
                <div class="list_article_icon">
                    <a href="https://twitter.com/share?url={{ request.scheme }}://{{ request.get_host }}{% url 'articles:detail' detail_id=article.id %}&text={{ article.title }}"
                            target="_blank" rel="nofollow" class="tw">
                        <i class="fab fa-twitter-square"></i>
                    </a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    <div class="pager">
        <ul class="pagination">
        {% if articles.has_previous %}
            <li class="pre"><a class="active" href="?page=1"><span>
                <i class="fa fa-angle-double-left" aria-hidden="true"></i></span>
            </a></li>
            <li class="pre"><a class="active" href="?page={{ articles.previous_page_number }}"><span>
                <i class="fa fa-angle-left" aria-hidden="true"></i></span>
            </a></li>
        {% endif %}

        {% for num in articles.paginator.page_range %}
            {% if articles.number == num %}
                <li><a class="active" href="#"><span>{{ num }}</span></a></li>
            {% elif num > articles.number|add:'-3' and num < articles.number|add:'3' %}
            <li><a href="?page={{ num }}"><span>{{ num }}</span></a></li>
            {% endif %}
        {% endfor %}

        {% if articles.has_next %}
            <li class="next"><a href="?page={{ articles.next_page_number }}"><span>
                <i class="fa fa-angle-right" aria-hidden="true"></i></span>
            </a></li>
            <li class="next"><a href="?page={{ articles.paginator.num_pages }}"><span>
                <i class="fa fa-angle-double-right" aria-hidden="true"></i></span>
            </a></li>
        {% endif %}
        </ul>
    </div>

    {% endblock %}
