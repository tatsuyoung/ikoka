{% extends 'base_layout.html' %}
{% block title %} My Notification {% endblock %}
{% block content %}
<div class="notification_wrapper_all">
    <div class="notification_wrapper">
        <div class="notification_icon">
            <i class="fas fa-bell"></i>
        </div>
        <div class="drop-down">
            {% if request.user.notifications.all %}
                <button type="button"><a class="btn-notify-1" href="{% url 'notifications:mark_all_as_read' %}?next={% url 'my_notifications' %}"><i class="fas fa-check"></i> All Read</a></button>
                <button type="button"><a class="btn-notify-2" href="{% url 'delete_my_read_notifications' %}"><i class="fas fa-trash-alt"></i> All Delete</a></button>
            {% endif %}

            <ul>
            {% for notification in request.user.notifications.all %}
            <div class="notify_item">
                    <div class="notify_img article_detail_author_img">
                        <a href="{% url 'accounts:profile_detail' notification.actor.username %}" class="avatar">
                            <img src="{{ notification.actor.profile.image.url }}" alt="Avatar" class="img-cover" loading="lazy"/>
                        </a>
                    </div>
                    <div class="{% if not notification.unread %}read{% else %}unread{% endif %}">
                        <p>{{ notification.actor }} <a href="{% url 'my_notification' notification.pk %}">{{ notification.verb }}</a></p>
                        <span class="notify_time">{{ notification.timesince }} ago</span>
                    </div>
            </div>
            {% empty %}
                <h4>There is no notification...</h4>
            {% endfor %}
            </ul>

        </div>
    </div>
</div>

<div class="menu_btn" onclick="toggleSideBar()">
    <span></span>
    <span></span>
</div>

<nav class="sub_nav" id="fixedNav">
    <a href="{% url 'home' %}" class="logo-menu">
        Local Things
    </a>
    <ui class="sub_ui">
        {% if user.is_authenticated %}
        <li>
            <form class="logout-link" action="{% url 'accounts:logout' %}" method="POST">
                {% csrf_token %}
            <button type="submit">Logout</button>
            </form>
        </li>
        <li><a href="{% url 'articles:users_detail' user.pk %}">
            <span>{{ request.user }}</span>
            </a>
        </li>
        <li><a href="{% url 'articles:create' %}">
            <span>New Articles</span>
            </a>
        </li>
        <li><a href="{% url 'accounts:user_following' %}">
            <span>Following Feed</span>
            </a>
        </li>
        {% else %}
        <li><a href="{% url 'accounts:login' %}">Login</a></li>
        <li><a href="{% url 'accounts:signup' %}">Signup</a></li>
        {% endif %}
        <li><a href="{% url 'home' %}">Home</a></li>
        <li><a href="{% url 'about' %}">About</a></li>
        <li><a href="{% url 'privacy-policy' %}">privacy policy</a></li>
        <li><a href="{% url 'accounts:contact' %}">contact</a></li>
        <li><a href="{% url 'articles:gallery' %}">nice things</a></li>
        <li><a href="{% url 'articles:ordered_by_likes' %}">ordered by likes</a></li>
    </ui>
</nav>
<script src="/static/menu_btn.js"></script>
{% endblock %}